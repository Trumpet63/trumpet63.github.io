{
  "version": 3,
  "sources": ["../../../src/index.js"],
  "sourcesContent": ["let canvas = document.getElementById(\"mainCanvas\");\r\nlet ctx = canvas.getContext(\"2d\");\r\nonResize();\r\n\r\nwindow.addEventListener(\"resize\", onResize);\r\nfunction onResize() {\r\n    let w = document.documentElement.clientWidth;\r\n    let h = document.documentElement.clientHeight;\r\n    canvas.width = w;\r\n    canvas.height = h;\r\n}\r\n\r\nlet previousTimeMillis = null;\r\nlet buffer = [];\r\nlet bufferMaxSize = 700;\r\n\r\nwindow.requestAnimationFrame(draw);\r\nfunction draw(currentTimeMillis) {\r\n    if (previousTimeMillis === null) {\r\n        previousTimeMillis = currentTimeMillis;\r\n        window.requestAnimationFrame(draw);\r\n        return;\r\n    }\r\n    \r\n    ctx.fillStyle = \"rgb(50, 50, 50)\";\r\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n\r\n    let deltaMillis = currentTimeMillis - previousTimeMillis;\r\n    buffer.push(deltaMillis);\r\n\r\n    if (buffer.length > bufferMaxSize) {\r\n        buffer.shift();\r\n    }\r\n\r\n    // get y bounds\r\n    let minDelta = buffer[0];\r\n    let maxDelta = buffer[0];\r\n    for (let i = 1; i < buffer.length; i++) {\r\n        if (buffer[i] > maxDelta) {\r\n            maxDelta = buffer[i];\r\n        }\r\n        if (buffer[i] < minDelta) {\r\n            minDelta = buffer[i];\r\n        }\r\n    }\r\n    let originalMinDelta = minDelta;\r\n    let originalMaxDelta = maxDelta;\r\n    minDelta *= 0.9;\r\n    maxDelta *= 1.1;\r\n\r\n    // draw points\r\n    ctx.lineWidth = 2;\r\n    ctx.strokeStyle = \"rgb(20, 255, 20)\";\r\n    ctx.beginPath();\r\n    for (let i = 0; i < buffer.length; i++) {\r\n        let x = mapLinear(0, i, bufferMaxSize - 1, 0, canvas.width);\r\n        let y = mapLinear(minDelta, buffer[i], maxDelta, canvas.height, 0);\r\n\r\n        if (i == 0) {\r\n            ctx.moveTo(x, y);\r\n        } else {\r\n            ctx.lineTo(x, y);\r\n        }\r\n    }\r\n    ctx.stroke();\r\n\r\n    ctx.fillStyle = \"white\";\r\n    ctx.textAlign = \"right\";\r\n    ctx.textBaseline = \"middle\";\r\n    let fontSize = Math.max(10, canvas.height / 40);\r\n    ctx.font = fontSize + \"px Arial\";\r\n    let y = mapLinear(minDelta, originalMinDelta, maxDelta, canvas.height, 0);\r\n    ctx.fillText(roundToNPlaces(originalMinDelta, 3) + \" ms\", canvas.width - 10, y);\r\n    y = mapLinear(minDelta, originalMaxDelta, maxDelta, canvas.height, 0);\r\n    ctx.fillText(roundToNPlaces(originalMaxDelta, 3) + \" ms\", canvas.width - 10, y);\r\n\r\n    previousTimeMillis = currentTimeMillis;\r\n    \r\n    window.requestAnimationFrame(draw);\r\n}\r\n\r\nfunction mapLinear(fromStart, fromValue, fromEnd, toStart, toEnd) {\r\n    fromValue = clampValueToRange(fromValue, Math.min(fromStart, fromEnd), Math.max(fromStart, fromEnd));\r\n    let toValue = Math.abs(fromValue - fromStart) * Math.abs(toEnd - toStart) / Math.abs(fromEnd - fromStart);\r\n    if (toEnd > toStart) {\r\n        toValue = toValue + toStart;\r\n    } else {\r\n        toValue = -toValue + toStart;\r\n    }\r\n    return toValue;\r\n}\r\n\r\nfunction clampValueToRange(value, lowerBound, upperBound) {\r\n    if (value < lowerBound) {\r\n        return lowerBound;\r\n    }\r\n    if (value > upperBound) {\r\n        return upperBound;\r\n    }\r\n    return value;\r\n}\r\n\r\nfunction roundToNPlaces(x, numPlaces) {\r\n    let scale = Math.pow(10, numPlaces);\r\n    return Math.round(x * scale) / scale;\r\n}\r\n"],
  "mappings": "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",
  "names": ["y"]
}
